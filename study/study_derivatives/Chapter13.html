<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Hyeonghwan</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Hyeonghwan</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../home.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../home_study.html"> 
<span class="menu-text">Study</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../home_life.html"> 
<span class="menu-text">Life</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
    <a href="https://github.com/kimhyeonghwan" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-google"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="">
            gudghks93@gmail.com
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="mailto:gudghks93@gmail.com">
            Send E-mail
            </a>
          </li>
      </ul>
    </div>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#chapter-13" id="toc-chapter-13" class="nav-link active" data-scroll-target="#chapter-13">Chapter 13</a>
  <ul class="collapse">
  <li><a href="#a-one-step-binomial-model-and-a-no-arbitrate-argument" id="toc-a-one-step-binomial-model-and-a-no-arbitrate-argument" class="nav-link" data-scroll-target="#a-one-step-binomial-model-and-a-no-arbitrate-argument">13.1 A one-step binomial model and a no-arbitrate argument</a></li>
  <li><a href="#risk-neutral-valuation" id="toc-risk-neutral-valuation" class="nav-link" data-scroll-target="#risk-neutral-valuation">13.2 Risk-Neutral Valuation</a></li>
  <li><a href="#two-step-binomial-trees" id="toc-two-step-binomial-trees" class="nav-link" data-scroll-target="#two-step-binomial-trees">13.3 Two-step binomial trees</a></li>
  <li><a href="#american-options" id="toc-american-options" class="nav-link" data-scroll-target="#american-options">13.5 American Options</a></li>
  <li><a href="#matching-volatility-with-u-and-d" id="toc-matching-volatility-with-u-and-d" class="nav-link" data-scroll-target="#matching-volatility-with-u-and-d">13.7 Matching Volatility with <span class="math inline">\(u\)</span> and <span class="math inline">\(d\)</span></a></li>
  <li><a href="#the-binomial-tree-formulas" id="toc-the-binomial-tree-formulas" class="nav-link" data-scroll-target="#the-binomial-tree-formulas">13.8 The Binomial Tree Formulas</a></li>
  <li><a href="#binomial-trees-in-various-options" id="toc-binomial-trees-in-various-options" class="nav-link" data-scroll-target="#binomial-trees-in-various-options">13.11 Binomial Trees in various Options</a>
  <ul class="collapse">
  <li><a href="#options-on-stocks-stock-indices-with-continuous-dividend" id="toc-options-on-stocks-stock-indices-with-continuous-dividend" class="nav-link" data-scroll-target="#options-on-stocks-stock-indices-with-continuous-dividend">Options on Stocks &amp; Stock indices with continuous dividend</a></li>
  <li><a href="#options-on-currencies" id="toc-options-on-currencies" class="nav-link" data-scroll-target="#options-on-currencies">Options on Currencies</a></li>
  <li><a href="#options-on-futures" id="toc-options-on-futures" class="nav-link" data-scroll-target="#options-on-futures">Options on Futures</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="chapter-13" class="level1 unnumbered">
<h1 class="unnumbered">Chapter 13</h1>
<p>이항모형 (Binomial Trees)</p>
<p>옵션의 프라이싱에 대한 가장 유명한 방법 중 하나인 이항모형을 다룹니다.</p>
<p>CRR모형(Cox, Ross, Rubinstein 1979)을 다룰 예정이며, 주가는 랜덤워크를 따르고 차익거래가 발생하지 않는다는 기본적인 가정을 전제합니다. 이는 BSM(Black-Sholes-Merton)모형과 함께 매우 중요한 방법론으로, 이항모형의 step이 많아질 수록 두 모형의 결과값은 동일해집니다. 이러한 성질에 대해서는 chaper15 및 21에서 보다 자세히 다룰 예정입니다.</p>
<p>CRR모형은 (1) 일반적인 no-arbitrage을 기반으로 하고, (2) 미국형 옵션 및 이색옵션을 가치평가하는 데에 직관적이고 유용하며, (3) 위험중립가치평가(Risk-neutral valuation)을 사용한다는 점에서 매우 중요합니다.</p>
<section id="a-one-step-binomial-model-and-a-no-arbitrate-argument" class="level2">
<h2 class="anchored" data-anchor-id="a-one-step-binomial-model-and-a-no-arbitrate-argument">13.1 A one-step binomial model and a no-arbitrate argument</h2>
<p>옵션의 만기를 <span class="math inline">\(T\)</span>라고 할 때, 향후 주가가 T시점까지 오르거나 내리는 단순한 구조로 되어있다고 가정하고, 현재 주가를 <span class="math inline">\(S_0\)</span>, 주가 상승시 <span class="math inline">\(S_T=S_0\times u\)</span> 및 하락시 <span class="math inline">\(S_T=S_0\times d\)</span>, 행사가격 <span class="math inline">\(K\)</span>의 유럽형 옵션의 현재가격이 <span class="math inline">\(f_0\)</span>로 주어져있다고 해보겠습니다.</p>
<p>현재시점에 주식을 <span class="math inline">\(\Delta\)</span>만큼 매수하고, 1주에 대한 옵션을 매도하는 포트폴리오 <span class="math inline">\(\Delta S_0-f_0\)</span>를 만든다면, 주가 상승시 포트폴리오의 가치는 <span class="math inline">\(\Delta S_0u-f_u\)</span> 및 하락시에는 <span class="math inline">\(\Delta S_0d-f_d\)</span>로 결정됩니다.</p>
<p>여기서, <strong>해당 포트폴리오를 무위험포트폴리오로 만들어 옵션의 가치를 평가</strong>할 수 있습니다. 해당 포트폴리오가 무위험이라는 의미는 주가 상승 및 하락시의 포트폴리오 가치가 동일하게 되어 변동성이 0이 된다는 것을 말합니다.</p>
<p>즉, <span class="math inline">\(\Delta S_0u-f_u=\Delta S_0d-f_d\;\Rightarrow\;\Delta=\frac{f_u-f_d}{S_0u-S_0d}\)</span>인 <span class="math inline">\(\Delta\)</span>를 도출하여 주식을 매수한다면 해당 포트폴리오는 위험이 0이 될 것 입니다.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="13.6 Options Delta">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
13.6 Options Delta
</div>
</div>
<div class="callout-body-container callout-body">
<p>위의 델타는 Opion Greeks 중, 기초자산가격 변동에 따른 옵션가격의 민감도인 델타(<span class="math inline">\(\Delta\)</span>)에 해당합니다.</p>
<p>위의 주식매수+옵션매도 포트폴리오에서 우리는 만기 pay-off를 고정시키는 델타를 산출하였으므로, 이는 현재시점에서 주식가격의 변동분과 옵션가격의 변동분이 상쇄됨을 의미합니다. 즉, 포트폴리오에서 주식의 가격이 1만큼 변할때 이에 대응되는 옵션의 가치변화는 <span class="math inline">\(\Delta\)</span>에 해당하므로, 이는 기초자산 가격에 대한 옵션가격의 민감도와 같습니다.</p>
<p>한편, 이렇게 옵션을 통해 주식포트폴리오의 가격변동분을 완벽히 상쇄하는 것을 델타헷지(Delta hedging)라 합니다.</p>
</div>
</div>
<p>따라서, 포트폴리오의 주가 상승 및 하락에 따른 가치가 <span class="math inline">\(\Delta S_0u-f_u\)</span>로 고정되며, no-arbitrage 가정에 따라 <span class="math inline">\(T\)</span>까지의 수익률은 무위험이자율 <span class="math inline">\(r_f\)</span>로 정해져야 합니다.</p>
<p>즉, 포트폴리오의 현재가치는 미래 pay-off를 무위험이자율로 할인한 현재가치와 동일해져야 하며,(<span class="math inline">\(\Delta S_0-f_0=(\Delta S_0u-f_u)e^{-rT}\)</span>) 여기에 <span class="math inline">\(\Delta=\frac{f_u-f_d}{S_0u-S_0d}\)</span>를 대입하여 정리하면, 아래와 같이 옵션의 현재가치를 평가할 수 있습니다.</p>
<p><span class="math inline">\(\Rightarrow f_0=\Delta S_0-(\Delta S_0u-f_u)e^{-rT}=\Delta S_0(1-ue^{-rT})+f_ue^{-rT}\)</span></p>
<p><span class="math inline">\(\Rightarrow f_0=\frac{f_u-f_d}{u-d}(1-ue^{-rT})+f_ue^{-rT}=\frac{f_u-f_d-f_uue^{-rT}+f_due^{-rT}+(u-d)f_ue^{-rT}}{u-d}\)</span></p>
<p><span class="math inline">\(\Rightarrow f_0=\frac{f_u(1-de^{-rT})-f_d(1-ue^{-rT})}{u-d}=e^{-rT}\frac{f_u(e^{rT}-d)+f_d(u-e^{rT})}{u-d}\)</span></p>
<p><span class="math inline">\(\Rightarrow f_0=e^{-rT}\frac{f_u(e^{rT}-d)+f_d(1-(e^{rT}-d))}{u-d}=e^{-rT}(f_u\times p+f_d\times(1-p))\;for\;p=\frac{e^{rT}-d}{u-d}\)</span></p>
<div class="callout callout-style-default callout-important callout-titled" title="Probability of stock price">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Probability of stock price
</div>
</div>
<div class="callout-body-container callout-body">
<p>위의 1-step binomial tree는 향후 주식이 상승할때의 가격과 하락할 때의 가격만을 이용하여 전개하고 있습니다.</p>
<p>즉, 주식이 상승할 확률과 하락할 확률은 다루고 있지 않습니다. 따라서, 상승할 확률이 0.5일때와 0.9일때의 옵션 가격은 동일합니다. 이는 매우 역설적으로 보입니다.</p>
<p>이러한 이유는 우리가 옵션을 평가할 때, 주식의 향후 가격을 이용해 상대적으로 평가하였기 때문입니다. 주식의 상승 또는 하락확률은 이미 주식의 상승시 가격과 하락시 가격에 내재되어 있기 때문에, 다시 한번 확률을 고려할 필요가 없어지게 됩니다.</p>
</div>
</div>
</section>
<section id="risk-neutral-valuation" class="level2">
<h2 class="anchored" data-anchor-id="risk-neutral-valuation">13.2 Risk-Neutral Valuation</h2>
<p><strong>위험중립가치평가</strong>란 파생상품을 프라이싱할 때, 모든 투자자가 위험중립적(<em>risk-neutral</em>)이라고 가정하는 것을 말합니다. 이는 모든 자산의 기대수익률이 무위험이자율과 동일하다는 의미이며, 이러한 투자자들만 존재하는 세상을 <em>risk-neutrall world</em>라고 합니다.</p>
<p>위험중립세상은 크게 두가지의 특징이 있습니다.</p>
<ol type="1">
<li>모든 투자자산의 기대수익률은 무위험이자율과 같다.</li>
<li>따라서, 투자자산의 향후 pay-off를 현재가치로 환산할 때 적용하는 할인률은 무위험이자율이다.</li>
</ol>
<p>이제 다시, 현재 주가(<span class="math inline">\(S_0\)</span>)는 <span class="math inline">\(T\)</span>시점까지 상승(<span class="math inline">\(S_0u\)</span>)하거나 하락(<span class="math inline">\(S_0d\)</span>)하고, 주가가 상승할 확률을 <span class="math inline">\(p\)</span>라고 가정하면 위험중립세상에서 아래와 같이 표현할 수 있습니다.</p>
<p><span class="math display">\[E(S_T)=S_0e^{rT},\;E(S_T)=p\times S_0u+(1-p)\times S_0d\]</span></p>
<p><span class="math display">\[\Rightarrow S_0e^{rT}=S_0(p(u-d)+d)\Rightarrow p=\frac{e^{rT}-d}{u-d}\]</span></p>
<p>즉, 위험중립세상에서 주가의 상승확률은 <span class="math inline">\(\frac{e^{rT-d}}{u-d}\)</span>와 같으며, 이는 1-step binomial tree에서 전개한 <span class="math inline">\(f_0=e^{-rT}(f_up+f_d(1-p))\)</span>의 p와 동일합니다. 즉, <strong>옵션의 현재가치는 위험중립세상에서 주가의 상승/하락 확률에 따른 옵션의 미래 pay-off들의 합의 현재가치와 같다</strong>는 것을 의미하며, 이를 통해 <strong>위험중립세상에서 평가한 옵션의 가치가 실제 세상에서도 동일하게 적용</strong>된다는 중요한 사실을 알 수 있습니다.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>실제 세상에서 투자자는 위험자산에 투자할 때, 보다 높은 수익률을 기대(<em>risk-averse</em>)하기 때문에 실제 세상과 위험중립세상은 차이가 있습니다. 그러나, 1-step binomial tree와 위험중립세상에서 주가의 상승확률의 결과를 통해 위험중립세상에서 평가한 파생상품의 가치는 실제 세상에서 동일하게 적용된다는 것을 알 수 있습니다.</p>
<p>한편, 실제 세상(<em>risk-averse</em>)에서 주가의 기대수익률은 무위험이자율보다 높을 것이므로 실제 세상에서 산출한 상승확률은 위험중립세상보다 클 것 입니다. 다만, 이 확률을 이용하여 옵션을 가치평가하는 경우 미래 pay-off에 적용하는 할인률을 옵션의 기대수익률로 변경해주어야 합니다.</p>
<p>그러나, 주식보다 위험한 자산인 옵션의 할인률을 산출하는 것은 매우 어려우므로, 위험중립세상에서 옵션을 평가하는 것이 실제 세상과 동일하다는 것은 매우 강력한 도구입니다.</p>
</div>
</div>
</section>
<section id="two-step-binomial-trees" class="level2">
<h2 class="anchored" data-anchor-id="two-step-binomial-trees">13.3 Two-step binomial trees</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
A(S, f) --&gt; B(Su, fu)
A --&gt; C(Sd, fd)
B --&gt; D(Suu, fuu)
B --&gt; E(Sud=Sdu, fud=fdu)
C --&gt; E
C --&gt; F(Sdd, fdd)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>이제, binomial tree를 확장하여 2-step model을 살펴보겠습니다. 주가가 상승하거나 하락하는 것이 2번에 걸쳐서 이루어지고, 각 기점의 시간을 <span class="math inline">\(\Delta t\)</span>라고 하면, 1-step binomial tree에 따라 다음과 같이 표현할 수 있습니다.</p>
<p><span class="math display">\[f_0=e^{-r\Delta t}(pf_u+(1-p)f_d)\;for\;p=\frac{e^{-r\Delta t}-d}{u-d}\]</span></p>
<p>또한, 이항모형의 2-step과정은 다음과 같이 표현할 수 있습니다.</p>
<p><span class="math display">\[f_u=e^{-r\Delta t}(pf_{uu}+(1-p)f_{ud})\;and\;f_d=e^{-r\Delta t}(pf_{du}+(1-p)f_{dd})\]</span></p>
<p><span class="math display">\[\Rightarrow f_0=e^{-r\times 2\Delta t}(p^2f_{uu}+2p(1-p)f_{ud}+(1-p)^2f_{dd})\]</span></p>
<div class="callout callout-style-default callout-note callout-titled" title="13.4 Put options example">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
13.4 Put options example
</div>
</div>
<div class="callout-body-container callout-body">
<p>Binomial tree의 일반화된 식은 콜옵션과 풋옵션에 관계없이 적용할 수 있습니다.</p>
</div>
</div>
</section>
<section id="american-options" class="level2">
<h2 class="anchored" data-anchor-id="american-options">13.5 American Options</h2>
<p>Binomial Tree는 미국형옵션을 가치평가할 때 아주 유용한 모형입니다. 유럽형옵션과 동일하게 만기까지 모든 node를 전개한 후, 현재가치로 환산할 때 하나의 node씩 진행하면서 조기행사하였을 때와 비교하면 됩니다.</p>
<p><span class="math display">\[f_u=max[max(K-S_u,0),\;e^{-r\Delta t}(pf_{uu}+(1-p)f_{ud})]\]</span></p>
<p><span class="math display">\[f_d=max[max(K-S_d,0),\;e^{-r\Delta t}(pf_{du}+(1-p)f_{dd})]\]</span></p>
<p><span class="math display">\[f_0=max[max(K-S_0,0),\;e^{-r\Delta t}(pf_u+(1-p)f_d)]\]</span></p>
<p>즉, 위와 같이 만기시점부터 이전 step으로 내려오면서 bootstrapping방식으로 미국형 옵션의 가치를 산출할 수 있습니다.</p>
</section>
<section id="matching-volatility-with-u-and-d" class="level2">
<h2 class="anchored" data-anchor-id="matching-volatility-with-u-and-d">13.7 Matching Volatility with <span class="math inline">\(u\)</span> and <span class="math inline">\(d\)</span></h2>
<p>앞서 무위험이자율, 주가상승/하락률, 시간의 증분이 주어졌을 때 위험중립확률 <span class="math inline">\(p=\frac{e^{r\Delta t}-d}{u-d}\)</span>로 결정되는 것을 알아보았습니다.</p>
<p>이제, 주가상승률 및 하락률을 주가변동성을 이용하여 표현해보겠습니다. 주가수익률의 표준편차를 <span class="math inline">\(\sigma\)</span>라고 할 때, 시간의 증분 <span class="math inline">\(\Delta t\)</span> 동안의 주가수익률의 표준편차는 <span class="math inline">\(\sigma\sqrt{\Delta t}\)</span>로 표현할 수 있습니다.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Chapter 15 : 주요 내용">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Chapter 15 : 주요 내용
</div>
</div>
<div class="callout-body-container callout-body">
<p>주가가 Geometric Brownian Motion을 따른다고 가정하겠습니다.(<span class="math inline">\(\frac{dS}{S}=\mu dt+\sigma dW_t\)</span>)</p>
<p>즉, 주가의 기대수익률이 <span class="math inline">\(\mu\)</span>, 표준편차가 <span class="math inline">\(\sigma\)</span>이면, 매우 짧은 시간에 대한 주가수익률이 정규분포(<span class="math inline">\(\frac{\Delta S}{S}\sim N(\mu\Delta t,\sigma^2\Delta t)\)</span>)를 따른다고 할 수 있습니다.</p>
<p>이때, 위험중립세상을 가정하면 <span class="math inline">\(\mu=r\)</span>입니다.</p>
</div>
</div>
<p>앞서 binomial tree의 한단계의 step에서 주가의 변동성을 <span class="math inline">\(E[X^2]-(E[X])^2\)</span>으로 표현하면 다음과 같이 정리할 수 있습니다.</p>
<p><span class="math display">\[\sigma^2\Delta t=p(u-1)^2+(1-p)(d-1)^2-(e^{r\Delta t}-1)^2\]</span></p>
<p><span class="math display">\[=p[(u-1)^2-(d-1)^2]+(d-1)^2-e^{2r\Delta t}+2e^{r\Delta t}-1\]</span></p>
<p><span class="math display">\[=\frac{e^{r\Delta t}-d}{u-d}[(u+d)(u-d)-2(u-d)]+d^2-2d-e^{2r\Delta t}+2e^{r\Delta t}\]</span></p>
<p><span class="math display">\[=e^{r\Delta t}(u+d)-ud-d^2-2e^{r\Delta t}+2d+d^2-2d-e^{2r\Delta t}+2e^{r\Delta t}\]</span></p>
<p><span class="math display">\[=e^{r\Delta t}(u+d)-ud-e^{2r\Delta t}..._{(13.13)}\]</span></p>
<p>여기서, 주가 상승 및 하락에 따른 비율을 동일하고 시간의 증분은 매우 작아 power가 1보다 크면 0으로 수렴한다고 가정하겠습니다. 즉, <span class="math inline">\((\Delta t)^k\rightarrow 0\;for\;k&gt;1\;\;\&amp;\;\;S_0ud=S_0du=S_0\Rightarrow ud=1\)</span></p>
<p>그러면, <span class="math inline">\(d=\frac{1}{u},u&gt;d\)</span>이며 테일러전개를 통해 <span class="math inline">\(e^{a\Delta t}=1+a\Delta t,\; e^{a\sqrt{\Delta t}}=1+a\sqrt{\Delta t}+\frac{1}{2}a^2\Delta t\)</span>로 쓸 수 있습니다.</p>
<p>다시 (13.13)에 이를 적용해보겠습니다.</p>
<p><span class="math inline">\(e^{r\Delta t}(u+d)-ud-e^{2r\Delta t}=\sigma^2\Delta t\)</span></p>
<p><span class="math inline">\(\Rightarrow e^{r\Delta t}(u+d)-ud=e^{2r\Delta t}+\sigma^2\Delta t\)</span></p>
<p><span class="math inline">\(\Rightarrow e^{r\Delta t}(u+1/u)-1=1+2r\Delta t+\sigma^2\Delta t=e^{2r+\sigma^2\Delta t}\)</span></p>
<p><span class="math inline">\(\Rightarrow u+\frac{1}{u}-e^{-r\Delta t}=e^{(r+\sigma^2)\Delta t}\)</span></p>
<p><span class="math inline">\(\Rightarrow u^2-(e^{(r+\sigma^2)\Delta t}+e^{-r\Delta t})u+1=0\)</span></p>
<p><span class="math inline">\(\Rightarrow u^2-(2+\sigma^2\Delta t)u+1=0\)</span></p>
<p><span class="math display">\[u=\frac{2+\sigma^2\Delta t\pm\sqrt{4+4\sigma^2\Delta t+\sigma^4 (\Delta t)^2_{\rightarrow 0}-4}}{2}=1\pm\sigma\sqrt{\Delta t}+\frac{1}{2}\sigma^2\Delta t=e^{\pm\sigma\sqrt{\Delta t}}\]</span></p>
<p><span class="math display">\[\therefore u=e^{\sigma\sqrt{\Delta t}},\;d=e^{-\sigma\sqrt{\Delta t}}\]</span></p>
<p>위 전개를 통해 얻을 수 있는 <span class="math inline">\(u,d\)</span>가 CRR모형에서 사용하는 상승 및 하락비율입니다.</p>
<div class="callout callout-style-default callout-important callout-titled" title="In Real-world u&amp;d">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
In Real-world u&amp;d
</div>
</div>
<div class="callout-body-container callout-body">
<p>위의 <span class="math inline">\(u,d\)</span>는 위험중립세상에서 산출한 상승 및 하락비율이나, real world에서도 동일하게 적용할 수 있습니다.</p>
<p>실제 세상에서 주가의 기대수익률을 <span class="math inline">\(\mu\)</span>, 변동성을 <span class="math inline">\(\sigma\)</span>, 주가 상승확률을 <span class="math inline">\(p^*=\frac{e^{\mu\Delta t}-d}{u-d}\)</span>라고 가정하고 <span class="math inline">\(E[S_T^2]-(E[S_T])^2=\sigma^2\Delta t\)</span>를 위와 동일하게 전개하면, 동일한 <span class="math inline">\(u,d\)</span>를 얻을 수 있습니다.</p>
<p>한편, 위험중립세상과 실제 세상에서 변동성은 동일하다고 가정하고 있는데, 이는 걸사노프의 정리(<em>Girsanov’s Theorem</em>)를 이용한 결과입니다.</p>
<p>걸사노프 정리에 따르면, 위험중립세상에서 실제세상으로 전환한다는 것은 측도를 전환(<em>changing measure</em>)하는 것인데, 측도론에서 실제세상은 P-measure 및 위험중립세상은 Q-measure에 해당합니다.</p>
<p>측도를 전환할 때, 기대성장률은 변화하지만 변동성은 유지되는데, 이것이 위험중립세상에서 실제세상으로 전환할 때 주가의 기대수익률은 변하는 반면 변동성은 유지된다는 것을 의미합니다.</p>
</div>
</div>
</section>
<section id="the-binomial-tree-formulas" class="level2">
<h2 class="anchored" data-anchor-id="the-binomial-tree-formulas">13.8 The Binomial Tree Formulas</h2>
<p>앞선 전개식을 요약하면, 주가의 변동성(<span class="math inline">\(\sigma\)</span>) 및 무위험이자율(<span class="math inline">\(r\)</span>), 1-step의 시차(<span class="math inline">\(\Delta t\)</span>)가 주어질 때, 이항모형을 적용한 옵션의 가치를 평가할 수 있습니다.</p>
<p>주가상승률 <span class="math inline">\(u=e^{\sigma\sqrt{\Delta t}}\)</span>, 주가하락률 <span class="math inline">\(d=\frac{1}{u}\)</span>, 주가상승률 <span class="math inline">\(p=\frac{e^{r\Delta t}-d}{u-d}\)</span>, 주가하락률 <span class="math inline">\(q=1-p\)</span>가 적용됩니다.</p>
<p>지금까지 1-step 또는 2-step의 간단한 이항모형만을 살펴보았으나, 실제 실무에 적용될때는 약 30-step의 이항과정이 진행되며, 이는 옵션의 만기까지 주가흐름에 대한 경우의 수가 <span class="math inline">\(2^{30}\approx 10^9=10billions\)</span> 이상 된다는 것을 의미합니다. 한편, 이항과정의 step이 많아질수록, <span class="math inline">\(\Delta t\)</span>가 매우 작아질수록 이항모형의 결과값은 BSM모형의 결과값으로 수렴하게 됩니다.(Appendix 참조)</p>
</section>
<section id="binomial-trees-in-various-options" class="level2">
<h2 class="anchored" data-anchor-id="binomial-trees-in-various-options">13.11 Binomial Trees in various Options</h2>
<section id="options-on-stocks-stock-indices-with-continuous-dividend" class="level3">
<h3 class="anchored" data-anchor-id="options-on-stocks-stock-indices-with-continuous-dividend">Options on Stocks &amp; Stock indices with continuous dividend</h3>
<p>주가 및 주가지수의 연속복리 배당수익률이 <span class="math inline">\(q\)</span>로 주어진 경우입니다.</p>
<p>위험중립세상에서 주가 및 주가지수의 수익률은 무위험이자율과 같아야하므로, 주가의 기대수익률 <span class="math inline">\(k\)</span>와 배당수익률 <span class="math inline">\(q\)</span>를 합산한 수익률인 무위험이자율과 같아야합니다.</p>
<p>즉, <span class="math inline">\(E[S_{\Delta t}]=S_0e^{r\Delta t}=S_0e^{k\Delta t}e^{q\Delta t},\;\;k=r-q\)</span>입니다.</p>
<p>따라서, 앞선 전개식에서 <span class="math inline">\(p=\frac{e^{(r-q)\Delta t}-d}{u-d}\)</span>로 변경됩니다.</p>
</section>
<section id="options-on-currencies" class="level3">
<h3 class="anchored" data-anchor-id="options-on-currencies">Options on Currencies</h3>
<p>이전 장에서 통화선도계약 및 통화스왑의 논리를 생각해봅시다.</p>
<p>현재시점에서 자금을 차입하여 해외통화에 투자한다면, 기대수익률은 <span class="math inline">\(e^{(r-r_f)\Delta t}\)</span>가 될 것입니다.</p>
<p>즉, <span class="math inline">\(p=\frac{e^{(r-r_f)\Delta t}-d}{u-d}\)</span>가 적용됩니다.</p>
</section>
<section id="options-on-futures" class="level3">
<h3 class="anchored" data-anchor-id="options-on-futures">Options on Futures</h3>
<p>선물의 가격 <span class="math inline">\(F_0=S_0e^{rT}\)</span>로 결정됩니다.</p>
<p><span class="math inline">\(F_T=S_T\)</span>이므로, 위험중립세상에서 <span class="math inline">\(E[F_T]=E[S_T]=S_0e^{rT}\)</span>이며 이항모형에서 이를 적용하면 선물의 기대수익률이 0임을 알 수 있습니다.</p>
<p><span class="math display">\[pF_0u+(1-p)F_0u=E[F_T]=E[S_T]\]</span></p>
<p><span class="math display">\[\Rightarrow pS_0e^{rT}u+(1-p)S_0e^{rT}d=S_0e^{rT}\]</span></p>
<p><span class="math display">\[\therefore p=\frac{1-d}{u-d}\]</span></p>


</section>
</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2024, Hyeonghwan Kim</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>